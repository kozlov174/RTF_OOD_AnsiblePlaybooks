---
- name: Ping host 10.40.240.3
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Ping 10.40.240.3 with shell command
      ansible.builtin.shell: |
        ping -c 3 -W 2 10.40.240.3
      register: ping_result
      ignore_errors: true
      changed_when: false

    - name: Show ping results
      ansible.builtin.debug:
        msg: "{{ ping_result.stdout_lines }}"

    - name: Check if host is reachable
      ansible.builtin.fail:
        msg: "Host 10.40.240.3 is unreachable!"
      when: ping_result.rc != 0